# ADR 0002: Шарувата Архітектура (Layered Architecture)

**Дата:** 2025-12-02
**Статус:** Прийнято

## Контекст
Щоб уникнути змішування бізнес-логіки, роботи з БД та HTTP-запитів, необхідно запровадити чіткий поділ відповідальності в рамках кожного модуля.

## Рішення
Ми застосовуємо шарувату архітектуру всередині кожного модуля (на прикладі Ordering):

### Структура шарів:
1.  **api/** (Interface Layer)
    * **Відповідальність:** Прийом HTTP-запитів, валідація вхідних даних, перетворення в DTO, відправка відповідей.
    * **Вміст:** Controllers, Routes.
2.  **service/** (Application Layer)
    * **Відповідальність:** Реалізація Use Cases, оркестрація бізнес-процесів, мапінг DTO <-> Domain.
    * **Вміст:** Service classes.
3.  **domain/** (Domain Layer)
    * **Відповідальність:** Чиста бізнес-логіка, сутності, інваріанти. Не залежить від фреймворків.
    * **Вміст:** Entity classes.
4.  **infrastructure/** (Infrastructure Layer)
    * **Відповідальність:** Робота з базою даних, зовнішніми API.
    * **Вміст:** Repositories.

### Напрямок залежностей (зверху вниз):
`API` -> `Service` -> `Domain` <- `Infrastructure` (Repository реалізує інтерфейс, необхідний домену/сервісу).

### Заборонені зв'язки:
* `api/` не може звертатися напряму до `infrastructure/` (БД).
* `domain/` не повинен залежати від `api/` або `express`.